import{f as e,j as t,l as n}from"./index-DYFsKyBy.js";import{a as r,c as i,d as a,f as o,g as s,h as c,i as l,l as u,m as d,n as f,o as p,p as m,r as h,s as g,t as _,u as v}from"./classes-KdTehFOV.js";const y=[{id:`demo-table-merge`,title:`表格合并单元格`,description:`班级-学生表格合并展示，主从表数据合并单元格处理。展示嵌套数据（班级包含学生列表）的表格合并单元格处理，分页基于班级，前端实现平铺和合并。`,categoryId:`cat-ui`,tagIds:[`tag-table`,`tag-element-plus`],component:`TableMergeDemo`,difficulty:`intermediate`,createdAt:`2026-01-15`,updatedAt:`2026-01-18`,author:`系统管理员`,views:156,likes:24},{id:`demo-virtual-scroll`,title:`虚拟滚动列表`,description:`大数据量下的虚拟滚动优化方案，提升页面性能。实现百万级数据的流畅滚动，支持动态高度和无限滚动。`,categoryId:`cat-performance`,tagIds:[`tag-performance`,`tag-virtual-list`],component:`VirtualScrollDemo`,difficulty:`advanced`,createdAt:`2026-01-15`,updatedAt:`2026-01-15`,author:`前端专家`,views:89,likes:18},{id:`demo-drag-drop`,title:`拖拽排序`,description:`使用SortableJS实现的拖拽排序功能，支持多种列表类型。包括表格行拖拽、卡片拖拽、树形结构拖拽等。`,categoryId:`cat-interaction`,tagIds:[`tag-drag`,`tag-sort`],component:`DragDropDemo`,difficulty:`beginner`,createdAt:`2026-01-15`,updatedAt:`2026-01-15`,author:`交互设计师`,views:123,likes:31},{id:`demo-charts`,title:`图表展示`,description:`Echarts和Antv G2的对比使用，展示不同图表库的特点。包括折线图、柱状图、饼图、地图等多种图表类型。`,categoryId:`cat-data-viz`,tagIds:[`tag-chart`,`tag-echarts`],component:`ChartDemo`,difficulty:`intermediate`,createdAt:`2026-01-15`,updatedAt:`2026-01-15`,author:`数据工程师`,views:210,likes:42},{id:`demo-form-validation`,title:`表单验证`,description:`复杂表单的验证规则实现，包括异步验证和自定义验证。支持动态表单、嵌套表单、表单联动等高级功能。`,categoryId:`cat-form`,tagIds:[`tag-form`,`tag-element-plus`],component:`FormValidationDemo`,difficulty:`intermediate`,createdAt:`2026-01-15`,updatedAt:`2026-01-15`,author:`全栈开发`,views:167,likes:28},{id:`demo-file-upload`,title:`文件上传`,description:`大文件分片上传、断点续传和进度显示功能。支持多种文件类型，提供上传管理、预览和下载功能。`,categoryId:`cat-file`,tagIds:[`tag-upload`],component:`FileUploadDemo`,difficulty:`advanced`,createdAt:`2026-01-15`,updatedAt:`2026-01-15`,author:`后端开发`,views:98,likes:19},{id:`demo-state-management`,title:`状态管理`,description:`Pinia状态管理的最佳实践，包括模块化、持久化、类型安全等。`,categoryId:`cat-state`,tagIds:[`tag-pinia`,`tag-vue`],component:`StateManagementDemo`,difficulty:`intermediate`,createdAt:`2026-01-15`,updatedAt:`2026-01-15`,author:`架构师`,views:145,likes:36},{id:`demo-routing-guards`,title:`路由守卫`,description:`Vue Router路由守卫的实现，包括权限控制、页面拦截、路由动画等。`,categoryId:`cat-routing`,tagIds:[`tag-vue`],component:`RoutingGuardsDemo`,difficulty:`intermediate`,createdAt:`2026-01-15`,updatedAt:`2026-01-15`,author:`安全专家`,views:112,likes:22}],b=e=>y.find(t=>t.id===e),x=e=>y.filter(t=>t.categoryId===e),S=e=>{let t=e.toLowerCase();return y.filter(e=>e.title.toLowerCase().includes(t)||e.description.toLowerCase().includes(t))},C=[{id:`cat-ui`,name:`UI组件`,description:`各种UI组件的实现和优化方案`,icon:`ElementPlus`,color:`#409EFF`,order:1},{id:`cat-performance`,name:`性能优化`,description:`前端性能优化方案和实践`,icon:`TrendCharts`,color:`#67C23A`,order:2},{id:`cat-interaction`,name:`交互体验`,description:`提升用户体验的交互效果`,icon:`Pointer`,color:`#E6A23C`,order:3},{id:`cat-data-viz`,name:`数据可视化`,description:`图表和数据展示方案`,icon:`PieChart`,color:`#F56C6C`,order:4},{id:`cat-form`,name:`表单处理`,description:`表单相关功能和验证实现`,icon:`Document`,color:`#909399`,order:5},{id:`cat-file`,name:`文件处理`,description:`文件上传下载和处理方案`,icon:`UploadFilled`,color:`#9B8DFF`,order:6},{id:`cat-state`,name:`状态管理`,description:`Vue状态管理方案`,icon:`Setting`,color:`#FF6B93`,order:7},{id:`cat-routing`,name:`路由导航`,description:`路由和导航相关实现`,icon:`Link`,color:`#06D6A0`,order:8}],w=e=>C.find(t=>t.id===e),T=[{id:`tag-table`,name:`表格`,color:`#409EFF`},{id:`tag-form`,name:`表单`,color:`#67C23A`},{id:`tag-modal`,name:`弹窗`,color:`#E6A23C`},{id:`tag-layout`,name:`布局`,color:`#F56C6C`},{id:`tag-button`,name:`按钮`,color:`#909399`},{id:`tag-card`,name:`卡片`,color:`#9B8DFF`},{id:`tag-performance`,name:`性能`,color:`#FF6B93`},{id:`tag-virtual-list`,name:`虚拟列表`,color:`#06D6A0`},{id:`tag-lazy-load`,name:`懒加载`,color:`#118AB2`},{id:`tag-code-split`,name:`代码分割`,color:`#EF476F`},{id:`tag-cache`,name:`缓存`,color:`#FFD166`},{id:`tag-drag`,name:`拖拽`,color:`#06D6A0`},{id:`tag-sort`,name:`排序`,color:`#118AB2`},{id:`tag-animation`,name:`动画`,color:`#EF476F`},{id:`tag-gesture`,name:`手势`,color:`#FFD166`},{id:`tag-keyboard`,name:`键盘导航`,color:`#073B4C`},{id:`tag-chart`,name:`图表`,color:`#EF476F`},{id:`tag-analysis`,name:`分析`,color:`#409EFF`},{id:`tag-echarts`,name:`Echarts`,color:`#118AB2`},{id:`tag-map`,name:`地图`,color:`#06D6A0`},{id:`tag-data-viz`,name:`数据可视化`,color:`#FF6B93`},{id:`tag-element-plus`,name:`Element Plus`,color:`#409EFF`},{id:`tag-vue`,name:`Vue`,color:`#42b883`},{id:`tailwind`,name:`Tailwind`,color:`#38bdf8`},{id:`tag-pinia`,name:`Pinia`,color:`#ffd859`}],E=e=>T.find(t=>t.id===e),D=new class{async getDemos(e){await c();let t=[...y];e?.categoryId&&(t=x(e.categoryId)),e?.tagIds&&e.tagIds.length>0&&(t=t.filter(t=>e.tagIds.some(e=>t.tagIds.includes(e)))),e?.difficulty&&(t=t.filter(t=>t.difficulty===e.difficulty)),e?.keyword&&(t=S(e.keyword));let n=e?.page||1,r=e?.size||10,i=t.length;return m(t,n,r,i)}async getDemoById(e){await c();let t=b(e);return t?(t.views+=1,d(t)):s(`Demo not found`,404)}async getDemoWithRelations(e){await c();let t=b(e);if(!t)return s(`Demo not found`,404);let n=C.find(e=>e.id===t.categoryId),r=T.filter(e=>t.tagIds.includes(e.id)),i={...t,category:n,tags:r};return t.views+=1,d(i)}async createDemo(e){if(await c(500),!C.find(t=>t.id===e.categoryId))return s(`Category not found`,400);let t=e.tagIds.filter(e=>!T.find(t=>t.id===e));if(t.length>0)return s(`Tags not found: ${t.join(`, `)}`,400);let n={...e,id:`demo-${Date.now()}`,createdAt:new Date().toISOString(),views:0,likes:0};return y.push(n),d(n,`Demo created successfully`,201)}async updateDemo(e,t){await c(400);let n=y.findIndex(t=>t.id===e);if(n===-1)return s(`Demo not found`,404);if(t.categoryId&&!C.find(e=>e.id===t.categoryId))return s(`Category not found`,400);if(t.tagIds){let e=t.tagIds.filter(e=>!T.find(t=>t.id===e));if(e.length>0)return s(`Tags not found: ${e.join(`, `)}`,400)}let r={...y[n],...t,updatedAt:new Date().toISOString()};return y[n]=r,d(r,`Demo updated successfully`)}async deleteDemo(e){await c(300);let t=y.findIndex(t=>t.id===e);return t===-1?s(`Demo not found`,404):(y.splice(t,1),d(void 0,`Demo deleted successfully`))}async likeDemo(e){await c(200);let t=b(e);return t?(t.likes+=1,d({likes:t.likes},`Demo liked successfully`)):s(`Demo not found`,404)}async getStats(){await c(400);let e=y.reduce((e,t)=>e+t.views,0),t=y.reduce((e,t)=>e+t.likes,0),n={};C.forEach(e=>{n[e.name]=x(e.id).length});let r=[...y].sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()).slice(0,5);return d({totalDemos:y.length,totalClasses:0,totalStudents:0,totalViews:e,totalLikes:t,demosByCategory:n,recentDemos:r})}},O=new class{async getCategories(){return await c(),d(C)}async getCategoryById(e){await c();let t=w(e);return t?d(t):s(`Category not found`,404)}async createCategory(e){await c(400);let t={...e,id:`cat-${Date.now()}`};return C.push(t),d(t,`Category created successfully`,201)}async updateCategory(e,t){await c(300);let n=C.findIndex(t=>t.id===e);if(n===-1)return s(`Category not found`,404);let r={...C[n],...t};return C[n]=r,d(r,`Category updated successfully`)}},k=new class{async getTags(){return await c(),d(T)}async getTagById(e){await c();let t=E(e);return t?d(t):s(`Tag not found`,404)}async createTag(e){await c(400);let t={...e,id:`tag-${Date.now()}`};return T.push(t),d(t,`Tag created successfully`,201)}},A=new class{async getStudents(e){await c();let t=[...p];e?.classId&&(t=r(e.classId)),t=g(e.name,e?.minAge,e?.maxAge,e?.gender);let n=e?.page||1,i=e?.size||10,a=t.length;return m(t,n,i,a)}async getStudentById(e){await c();let t=l(e);return t?d(t):s(`学生不存在`,404)}async createStudent(e,t,n,r){if(await c(500),!f.find(e=>e.id===n))return s(`班级不存在`,400);let i={id:p.length+1,name:e,age:t,classId:n,gender:r};return p.push(i),d(i,`添加学生成功`,201)}async updateStudent(e,t,n,r,i){await c(400);let a=p.findIndex(t=>t.id===e);if(a===-1)return s(`学生不存在`,404);if(!f.find(e=>e.id===r))return s(`班级不存在`,400);let o={id:e,name:t,age:n,classId:r,gender:i};return p[a]=o,d(o,`更新学生成功`)}async deleteStudent(e){await c(300);let t=p.findIndex(t=>t.id===e);return t===-1?s(`学生不存在`,404):(i([e]),p.splice(t,1),d(void 0,`删除学生成功`))}async deleteStudentByClassId(e){return await c(300),h(e),d(void 0,`删除学生成功`)}},j=new class{async getScores(e){await c();let t=[...a];e?.studentId&&(t=v(e.studentId)),(e?.startScore!==void 0||e?.endScore!==void 0||e?.startCreateDate||e?.endCreateDate)&&(t=o(e.startScore||0,e.endScore||100,e.startCreateDate||`2000-01-01`,e.endCreateDate||`2100-12-31`));let n=e?.page||1,r=e?.size||10,i=t.length;return m(t,n,r,i)}async getScoreById(e){await c();let t=u(e);return t?d(t):s(`成绩不存在`,404)}async createScore(e){if(await c(500),!p.find(t=>t.id===e.studentId))return s(`学生不存在`,400);if(e.score<0||e.score>100)return s(`分数必须在0-100之间`,400);let t={id:a.length+1,...e};return a.push(t),d(t,`添加成绩成功`,201)}async updateScore(e,t){await c(400);let n=a.findIndex(t=>t.id===e);if(n===-1)return s(`成绩不存在`,404);if(t.studentId&&!p.find(e=>e.id===t.studentId))return s(`学生不存在`,400);if(t.score!==void 0&&(t.score<0||t.score>100))return s(`分数必须在0-100之间`,400);let r={...a[n],...t};return a[n]=r,d(r,`更新成绩成功`)}async deleteScore(e){await c(300);let t=a.findIndex(t=>t.id===e);return t===-1?s(`成绩不存在`,404):(a.splice(t,1),d(void 0,`删除成绩成功`))}async deleteScoresByStudent(e){await c(300);let t=a.length,n=new Set([e]),r=a.filter(e=>!n.has(e.studentId));return r.length===t?d(void 0,`没有需要删除的成绩`):(a.length=0,a.push(...r),d(void 0,`删除成绩成功`))}async getStudentAverageScore(e){await c(200);let t=v(e);if(t.length===0)return d(0,`该学生暂无成绩`);let n=t.reduce((e,t)=>e+t.score,0)/t.length;return d(parseFloat(n.toFixed(2)),`计算成功`)}async getClassScoreStats(e){await c(400);let t=p.filter(t=>t.classId===e);if(t.length===0)return s(`班级不存在或没有学生`,404);let n=0,r=0,i=0,a=100,o=0;t.forEach(e=>{let t=v(e.id);t.length>0&&(o++,t.forEach(e=>{n+=e.score,r++,i=Math.max(i,e.score),a=Math.min(a,e.score)}))});let l=r>0?n/r:0;return d({average:parseFloat(l.toFixed(2)),max:i,min:a,totalStudents:t.length,studentsWithScores:o},`统计成功`)}},M=n(`demo`,()=>{let n=t([]),r=t(null),i=t([]),a=t([]),o=t([]),s=t([]),c=t([]),l=t({page:1,size:10,total:0}),u=t(!1),d=t(null);return{demos:n,currentDemo:r,categories:i,tags:a,classes:o,students:s,scores:c,pagination:l,loading:u,error:d,totalDemos:e(()=>n.value.length),popularDemos:e(()=>[...n.value].sort((e,t)=>t.views-e.views).slice(0,5)),recentDemos:e(()=>[...n.value].sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()).slice(0,5)),getGradeFromClassName:e=>e.includes(`高一`)?`高一`:e.includes(`高二`)?`高二`:e.includes(`高三`)?`高三`:`未知`,getCategoryName:e=>i.value.find(t=>t.id===e)?.name||`Unknown`,fetchDemos:async e=>{u.value=!0,d.value=null;try{let t=await D.getDemos(e);if(t.code===200)n.value=t.data,t.page&&t.size&&t.total&&(l.value={page:t.page,size:t.size,total:t.total});else throw Error(t.message)}catch(e){d.value=e.message||`加载失败`,console.error(`加载Demo列表失败:`,e)}finally{u.value=!1}},fetchDemoById:async e=>{u.value=!0,d.value=null;try{let t=await D.getDemoWithRelations(e);if(t.code===200)r.value=t.data;else throw Error(t.message)}catch(e){d.value=e.message||`加载失败`,console.error(`加载Demo详情失败:`,e)}finally{u.value=!1}},fetchCategories:async()=>{try{let e=await O.getCategories();e.code===200&&(i.value=e.data)}catch(e){console.error(`加载分类失败:`,e)}},fetchTags:async()=>{try{let e=await k.getTags();e.code===200&&(a.value=e.data)}catch(e){console.error(`加载标签失败:`,e)}},fetchClasses:async e=>{u.value=!0,d.value=null;try{let t=await _.getClasses(e);if(t.code===200)o.value=t.data,t.page&&t.size&&t.total&&(l.value={page:t.page,size:t.size,total:t.total});else throw Error(t.message)}catch(e){d.value=e.message||`加载失败`,console.error(`加载班级数据失败:`,e)}finally{u.value=!1}},fetchStudents:async e=>{u.value=!0,d.value=null;try{let t=await A.getStudents({classId:e,page:l.value.page,size:l.value.size});if(t.code===200)s.value=t.data,t.page&&t.size&&t.total&&(l.value={page:t.page,size:t.size,total:t.total});else throw Error(t.message)}catch(e){d.value=e.message||`加载失败`,console.error(`加载学生数据失败:`,e)}finally{u.value=!1}},fetchScores:async e=>{u.value=!0,d.value=null;try{let t=await j.getScores({studentId:e,page:l.value.page,size:l.value.size});if(t.code===200)c.value=t.data,t.page&&t.size&&t.total&&(l.value={page:t.page,size:t.size,total:t.total});else throw Error(t.message)}catch(e){d.value=e.message||`加载失败`,console.error(`加载成绩数据失败:`,e)}finally{u.value=!1}},likeDemo:async e=>{try{let t=await D.likeDemo(e);if(t.code===200){let i=n.value.findIndex(t=>t.id===e);return i>-1&&(n.value[i].likes=t.data.likes),r.value?.id===e&&(r.value.likes=t.data.likes),t.data.likes}}catch(e){console.error(`点赞失败:`,e)}},createDemo:async e=>{try{let t=await D.createDemo(e);if(t.code===201)return n.value.unshift(t.data),t.data}catch(e){throw console.error(`创建Demo失败:`,e),e}},getClassStats:async e=>{try{let t=await j.getClassScoreStats(e);return t.code===200?t.data:null}catch(e){return console.error(`获取班级统计信息失败:`,e),null}}}});export{M as t};